module exec_fsm(input logic clk,rst_n,start,exec_done,
                output logic load_en,exec_en,store_en,done);
  
  typedef enum logic [1:0] {IDLE, LOAD, EXEC, STORE} state_t;
  state_t state,next_state;
  
  always_ff @(posedge clk or negedge rst_n) begin
    if(!rst_n)
      state <= IDLE;
    else
      state <= next_state;
  end
  
  always_comb begin
    load_en=0; exec_en=0; store_en=0; done=0;
    next_state = state;
    case(state)
      IDLE: if(start) next_state = LOAD;
      LOAD: begin
        load_en=1;
        next_state = EXEC;
      end
      EXEC: begin
        exec_en=1;
        if(exec_done) next_state = STORE;
      end
      STORE: begin
        store_en=1;
        done=1;
        next_state = IDLE;
      end
    endcase
  end
endmodule